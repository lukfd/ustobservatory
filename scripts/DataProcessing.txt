


Function Process Jupiter
	
	run combiner
		update "new data pending" flag based on cwd


	For each project pending  // Read the pending project list from the database.


		if new data is available for this plan
			Process new data  // Combine frames, extract data, etc.

				# Sarah's Block.
				Call Combiner(Path_to_images, alignment_reference, images_per_group=5)
					Move to the "processed" directory					
					Imalign (xregister) and Imcombine groups of images in fives sorted by sequence number				
					Align all combined images 
						to some arbitrary reference... probably the very first image from the first night.	

			Update "new data pending" flag in the database

		endif

		If All requested data gathered
	
			Package Data
			Update DataBase

		Else 

			If too many consecutive cloudy nights ( or too few consecutive clear nights .. or bad ratio clear/cloudy)
				throw out all data but the last one 
			Endif

			If no observations are pending
				Submit observing plan to the telescope
				Update the database
			Endif
				
		end else

	end for

end function


